{"version":3,"sources":["filters/None/None.js","filters/Snowfall/Snowfall.js","filters/GreenRed/GreenRed.js","filters/Twinkle/Twinkle.js","filters/BlackWhite/BlackWhite.js","Filter.js","AVControl.js","Track.js","FilterIcon.js","FilterMenu.js","Participant.js","Room.js","App.js","reportWebVitals.js","index.js"],"names":["None","props","className","Snowfall","Array","fill","map","snowflake","index","GreenRed","Twinkle","light","BlackWhite","state","video","ref","React","createRef","this","current","parentElement","querySelector","firstChild","style","webkitFilter","setState","Component","Filter","componentMap","name","AVControl","icon","trackOff","type","onClick","toggleTrack","Track","filters","bind","track","kind","child","attach","classList","add","appendChild","on","message","includes","filter","f","console","log","enable","disable","local","FilterIcon","useState","selected","setSelected","changeFilter","FilterMenu","Participant","nonNullTracks","from","participant","tracks","values","publication","localParticipant","addTrack","find","send","isDominantSpeaker","dominantSpeaker","identity","id","Room","remoteParticipants","room","participants","leaveRoom","addParticipant","removeParticipant","highlightDominantSpeaker","window","addEventListener","disconnect","p","require","connect","LocalDataTrack","App","inputRef","joinRoom","updateIdentity","removePlaceholderText","fetch","response","json","data","accessToken","audio","localDataTrack","publishTrack","event","target","value","placeholder","disabled","onChange","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4d8c5eaa.chunk.js","sourcesContent":["export default function None(props) {\n  return (\n    <div className=\"filter none\">\n    </div>\n  );\n}\n","import './Snowfall.scss';\n\nexport default function Snowfall(props) {\n  return (\n    <div className=\"filter snowfall\">\n      { \n        Array(100).fill().map( (snowflake, index) => <div key={index} className=\"snowflake\"></div>)\n      }\n    </div>\n  );\n}\n","import './GreenRed.scss';\n\nexport default function GreenRed(props) {\n  return (\n    <div className=\"filter green_red\">\n    </div>\n  );\n}","import './Twinkle.scss';\nimport React, {Component} from 'react';\n\nexport default function Twinkle() {\n  return (\n    <div className=\"filter twinkle\">\n      { \n        Array(7).fill().map(light => {\n          return (\n            <div className=\"light\" >\n              <div className=\"fixture\"></div>\n              <div className=\"bulb\"></div>\n              <div className=\"string\"></div>\n            </div>\n          )\n        })\n      }\n    </div>\n  );\n}","import './BlackWhite.scss';\nimport React, {Component} from 'react';\n\nexport default class BlackWhite extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      video: null\n    }\n\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    const grandparent = this.ref.current.parentElement.parentElement;\n    const aunt = grandparent.querySelector('.video');\n    const video = aunt.firstChild;\n    video.style.webkitFilter = 'grayscale(100%)';\n    this.setState({video:video});\n  }\n\n  componentWillUnmount() {\n    this.state.video.style.webkitFilter = 'none';\n  }\n\n  render() {\n    return (\n      <div className=\"filter black_white\" ref={this.ref}>\n      </div>\n    );\n  }\n}","import './App.scss';\nimport * as componentMap from './filters';\n\nfunction Filter(props) {\n  const Filter = componentMap[props.name]\n  return <Filter/>\n}\n\nexport default Filter;\n","import './App.scss';\n\nfunction AVControl(props) {\n  let icon;\n\n  if (props.trackOff) {\n    icon = props.type === 'audio' ? 'microphone-slash' : 'video-slash';\n  } else {\n    icon = props.type === 'audio' ? 'microphone' : 'video';\n  }\n\n  return (\n    <div className=\"avControl\">\n      <i className={`fas fa-lg fa-${icon}`} onClick={() => props.toggleTrack()}></i>\n    </div>\n  );\n}\n\nexport default AVControl;","import React, {Component} from 'react';\nimport './App.scss';\nimport Filter from './Filter';\nimport AVControl from './AVControl';\n\nclass Track extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      filters: [],\n      trackOff: false\n    }\n\n    this.ref = React.createRef();\n    this.toggleTrack = this.toggleTrack.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.track) {\n      if (this.props.track.kind !== 'data') {\n        const child = this.props.track.attach();\n        this.ref.current.classList.add(this.props.track.kind);\n        this.ref.current.appendChild(child)\n      } else {\n        this.props.track.on('message', message => {\n          if (this.state.filters.includes(message)) {\n            this.setState({ filters: this.state.filters.filter(f => f !== message) });\n          } else {\n            this.setState({ filters: [...this.state.filters, message] });\n          }\n        });\n      }\n    } \n  }\n\n  toggleTrack() {\n    console.log('toggling')\n    if (this.state.trackOff) {\n      this.props.track.enable();\n    } else {\n      this.props.track.disable();\n    }\n\n    this.setState({\n      trackOff: !this.state.trackOff\n    })\n  }\n  \n  render() {\n    const filters = this.props.local ? this.props.filters : this.state.filters;\n\n    return (\n      <div className=\"track\" ref={this.ref}>\n        {\n          this.props.track && this.props.track.kind === 'data'\n          ? filters.map(filter => <Filter key={filter} name={filter} />)\n          : ''\n        }\n\n        {\n          this.props.local && this.props.track && this.props.track.kind !== 'data'\n          ? <AVControl toggleTrack={this.toggleTrack} trackOff={this.state.trackOff} type={this.props.track.kind}/>\n          : ''\n        }\n      </div> \n    )\n  }\n}\n\nexport default Track;\n","import './App.scss';\nimport React, { useState } from 'react';\n\nfunction FilterIcon(props) {\n\n  const [selected, setSelected] = useState(false);\n\n  const toggleIcon = (name => {\n    setSelected(!selected);\n    props.changeFilter(name)\n  });\n\n  return (\n    <div className={`icon icon-${selected} icon-${props.filter.name}`} onClick={ () => toggleIcon(props.filter.name) }>\n      <i className={`fas fa-lg ${props.filter.icon}`}></i>\n    </div>\n  );\n}\n\nexport default FilterIcon;\n","import './App.scss';\nimport FilterIcon from './FilterIcon'\n\nfunction FilterMenu(props) {\n  const filters = [\n    {name:'Snowfall', icon:'fa-snowflake'}, \n    {name:'GreenRed', icon:'fa-holly-berry'}, \n    {name:'Twinkle', icon:'fa-lights-holiday'}\n  ];\n\n  return (\n    <div className=\"filterMenu\">\n      { \n        filters.map(filter => <FilterIcon key={filter.name} filter={filter} changeFilter={props.changeFilter}/>)\n      }\n    </div>\n  );\n}\n\nexport default FilterMenu;","import React, {Component} from 'react';\nimport './App.scss';\nimport Track from './Track';\nimport FilterMenu from './FilterMenu';\n\nclass Participant extends Component {\n  constructor(props) {\n    super(props);\n\n    const existingPublications = Array.from(this.props.participant.tracks.values());\n    const existingTracks = existingPublications.map(publication => publication.track);\n    const nonNullTracks = existingTracks.filter(track => track !== null)\n\n    this.state = {\n      tracks: nonNullTracks,\n      filters: [] \n    }\n\n    this.changeFilter = this.changeFilter.bind(this);\n  }\n\n  componentDidMount() {\n    if (!this.props.localParticipant) {\n      // when someone subscribes to one a new remote participants audio or video tracks (subscription by local participant happens automatically)\n      this.props.participant.on('trackSubscribed', track => this.addTrack(track));\n      // when a remote participant joins the room and publishes a new data track\n      this.props.participant.on('trackPublished', publication => this.addTrack(publication.track));\n    }\n  }\n\n  addTrack(track) {\n    this.setState({\n      tracks: [...this.state.tracks, track]\n    });\n  }\n\n  changeFilter(filter) {\n    const dataTrack = this.state.tracks.find(track => track.kind == \"data\");\n    dataTrack.send(filter);\n\n    if (this.state.filters.includes(filter)) {\n      this.setState({ filters: this.state.filters.filter(f => f !== filter) });\n    } else {\n      this.setState({ filters: [...this.state.filters, filter] });\n    }\n  }\n\n  render() {\n    const isDominantSpeaker = this.props.dominantSpeaker === this.props.participant.identity ? 'dominantSpeaker' : '';\n\n    return ( \n      <div className={`participant ${isDominantSpeaker}`} id={this.props.participant.identity}>\n        <div className=\"identity\">{ this.props.participant.identity}</div>\n        {\n          this.props.localParticipant\n          ? <FilterMenu changeFilter={this.changeFilter} />\n          : ''\n        }\n        \n        { \n          this.state.tracks.map(track => \n            <Track key={track} filters={this.state.filters} local={this.props.localParticipant} track={track}/>)\n        }\n      </div>\n    );\n  }\n}\n\nexport default Participant;\n","import React, {Component} from 'react';\nimport './App.scss';\nimport Participant from './Participant';\n\n\nclass Room extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      remoteParticipants: Array.from(this.props.room.participants.values())\n    }\n\n    this.leaveRoom = this.leaveRoom.bind(this);\n  }\n\n  componentDidMount() {\n    // Add event listeneres for future participants coming or going\n    this.props.room.on('participantConnected', participant => this.addParticipant(participant));\n    this.props.room.on('participantDisconnected', participant => this.removeParticipant(participant));\n    this.props.room.on('dominantSpeakerChanged', participant => this.highlightDominantSpeaker(participant));\n    \n    window.addEventListener(\"beforeunload\", this.leaveRoom);\n  }\n\n  componentWillUnmount() {\n    this.leaveRoom();\n  }\n\n  leaveRoom() {\n    this.props.room.disconnect();\n    this.props.leaveRoom();\n  }\n\n  addParticipant(participant) {\n    console.log(`${participant.identity} has joined the room.`)\n    \n    this.setState({\n      remoteParticipants: [...this.state.remoteParticipants, participant]\n    })\n  }\n\n  removeParticipant(participant) {\n    console.log(`${participant.identity} has left the room`)\n\n    this.setState({\n      remoteParticipants: this.state.remoteParticipants.filter(p => p.identity != participant.identity)\n    })\n  }\n\n  highlightDominantSpeaker(participant) {\n    this.setState({\n      dominantSpeaker: participant ? participant.identity : null\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"room\">\n        <div className = \"participants\">\n          <Participant key={this.props.room.localParticipant.identity} dominantSpeaker={this.state.dominantSpeaker} localParticipant=\"true\" participant={this.props.room.localParticipant}/>\n          {\n            this.state.remoteParticipants.map(participant => \n              <Participant key={participant.identity} dominantSpeaker={this.state.dominantSpeaker} participant={participant}/>\n            )\n          }\n        </div>\n        <button id=\"leaveRoom\" onClick={this.leaveRoom}>Leave Room</button>\n      </div>\n    );\n  }\n\n}\n\nexport default Room;\n","import './App.scss';\nimport React, {Component} from 'react';\nimport Room from './Room';\n\nconst { connect, LocalDataTrack } = require('twilio-video');\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      identity: '',\n      room: null\n    }\n\n    this.inputRef = React.createRef();\n\n    this.joinRoom = this.joinRoom.bind(this);\n    this.leaveRoom = this.leaveRoom.bind(this);\n    this.updateIdentity = this.updateIdentity.bind(this);\n    this.removePlaceholderText = this.removePlaceholderText.bind(this);\n  }\n  \n  async joinRoom() {\n    try {\n      const response = await fetch(`https://backend-9288-dev.twil.io/token?identity=${this.state.identity}`);\n      const data = await response.json();\n      const room = await connect(data.accessToken, {\n        name:'secret-santa4',\n        audio: true,\n        video: true,\n        dominantSpeaker: true\n      });\n\n      const localDataTrack = new LocalDataTrack();\n      await room.localParticipant.publishTrack(localDataTrack);\n\n      this.setState({ room: room });\n    } catch(err) {\n      console.log(err);\n    }\n  }\n\n  leaveRoom() {\n    this.setState({ room: null });\n  }\n\n  updateIdentity(event) {\n    this.setState({\n      identity: event.target.value\n    });\n  }\n\n  removePlaceholderText() {\n    this.inputRef.current.placeholder = '';\n  }\n\n  render() {\n    const disabled = this.state.identity == '' ? true : false;\n\n    return (\n      <div className=\"app\">\n        { \n          this.state.room === null\n          ? <div className = \"lobby\">\n              <h1>Circle Girls Secret Santa</h1>\n              <h1 className=\"year\">2020</h1>\n              <input \n                ref={this.inputRef} \n                value={this.state.identity} \n                onClick={this.removePlaceholderText} \n                onChange={this.updateIdentity} \n                placeholder=\"What's your name?\"/>\n\n              <button disabled={disabled} onClick={this.joinRoom}>Join Room</button>\n            </div>\n          : <Room leaveRoom={this.leaveRoom} room={this.state.room} />\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}