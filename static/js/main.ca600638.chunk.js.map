{"version":3,"sources":["filters/None/None.js","filters/Snowfall/Snowfall.js","filters/GreenRed/GreenRed.js","filters/Twinkle/Twinkle.js","filters/BlackWhite/BlackWhite.js","Filter.js","Track.js","FilterMenu.js","Participant.js","Room.js","App.js","reportWebVitals.js","index.js"],"names":["None","props","className","Snowfall","Array","fill","map","snowflake","GreenRed","Twinkle","state","height","twinkle","React","createRef","setHeight","bind","window","addEventListener","this","current","width","setState","ref","light","style","Component","BlackWhite","video","parentElement","querySelector","firstChild","webkitFilter","Filter","componentMap","name","Track","filter","track","kind","child","attach","classList","add","appendChild","on","message","FilterMenu","onClick","changeFilter","Participant","nonNullTracks","from","participant","tracks","values","publication","localParticipant","addTrack","find","send","id","identity","Room","remoteParticipants","room","participants","leaveRoom","addParticipant","removeParticipant","disconnect","console","log","p","require","connect","LocalDataTrack","App","inputRef","joinRoom","updateIdentity","removePlaceholderText","fetch","response","json","data","accessToken","audio","localDataTrack","publishTrack","event","target","value","placeholder","disabled","onChange","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ca600638.chunk.js","sourcesContent":["export default function None(props) {\n  return (\n    <div className=\"filter none\">\n    </div>\n  );\n}\n","import './Snowfall.scss';\n\nexport default function Snowfall(props) {\n  return (\n    <div className=\"filter snowfall\">\n      { \n        Array(100).fill().map(snowflake => <div className=\"snowflake\"></div>)\n      }\n    </div>\n  );\n}\n","import './GreenRed.scss';\n\nexport default function GreenRed(props) {\n  return (\n    <div className=\"filter green_red\">\n    </div>\n  );\n}","import './Twinkle.scss';\nimport React, {Component} from 'react';\n\nexport default class Twinkle extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      height: 30\n    }\n\n    this.twinkle = React.createRef();\n    this.setHeight = this.setHeight.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.setHeight);\n  }\n\n  setHeight() {\n    const width = this.twinkle.current.width;\n    const height = width * 2;\n    this.setState({height: height})\n  }\n\n  render() {\n    return (\n      <div className=\"filter twinkle\" ref={this.twinkle}>\n        { \n          Array(7).fill().map(light => {\n            return (\n              <div className=\"light\" style={{height:this.state.height}}>\n                <div className=\"fixture\"></div>\n                <div className=\"bulb\"></div>\n                <div className=\"string\"></div>\n              </div>\n            )\n          })\n        }\n      </div>\n    );\n  }\n  \n}","import './BlackWhite.scss';\nimport React, {Component} from 'react';\n\nexport default class BlackWhite extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      video: null\n    }\n\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    const grandparent = this.ref.current.parentElement.parentElement;\n    const aunt = grandparent.querySelector('.video');\n    const video = aunt.firstChild;\n    video.style.webkitFilter = 'grayscale(100%)';\n    this.setState({video:video});\n  }\n\n  componentWillUnmount() {\n    this.state.video.style.webkitFilter = 'none';\n  }\n\n  render() {\n    return (\n      <div className=\"filter black_white\" ref={this.ref}>\n      </div>\n    );\n  }\n}","import './App.scss';\nimport * as componentMap from './filters';\n\nfunction Filter(props) {\n  const Filter = componentMap[props.name]\n  return <Filter/>\n}\n\nexport default Filter;\n","import React, {Component} from 'react';\nimport './App.scss';\nimport Filter from './Filter';\n\nclass Track extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      filter: ''\n    }\n\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    if (this.props.track) {\n      if (this.props.track.kind != 'data') {\n        const child = this.props.track.attach();\n        this.ref.current.classList.add(this.props.track.kind);\n        this.ref.current.appendChild(child)\n      } else {\n        this.props.track.on('message', message => {\n          this.setState({filter: message})\n        });\n      }\n    } \n  }\n  \n  render() {\n    return (\n      <div className=\"track\" ref={this.ref}>\n        {\n          this.props.track && this.props.track.kind == 'data'\n          ? <Filter name={this.state.filter || this.props.filter} />\n          : ''\n        }\n      </div> \n    )\n  }\n}\n\nexport default Track;\n","// import './App.scss';\n// import FilterIcon from './FilterIcon'\n\n// function FilterMenu(props) {\n//   const filters = ['None', 'Snowfall', 'GreenRed', 'Twinkle', 'BlackWhite'];\n\n//   return (\n//     <div className=\"filterMenu\">\n//       { \n//         filters.map(filter => <FilterIcon changeFilter={props.changeFilter} key={filter} name={filter}/>)\n//       }\n//     </div>\n//   );\n// }\n\n// export default FilterMenu;\n\n\nimport './App.scss';\n\nfunction FilterMenu(props) {\n  const filters = ['None', 'Snowfall', 'GreenRed', 'Twinkle'];\n\n  return (\n    <div className=\"filterMenu\">\n      { \n        filters.map(filter => \n            <div \n              className={`icon icon-${filter}`} \n              onClick={ () => props.changeFilter(filter) }>{filter}\n            </div>\n        )\n      }\n    </div>\n  );\n}\n\nexport default FilterMenu;","import React, {Component} from 'react';\nimport './App.scss';\nimport Track from './Track';\nimport FilterMenu from './FilterMenu';\n\nclass Participant extends Component {\n  constructor(props) {\n    super(props);\n\n    const existingPublications = Array.from(this.props.participant.tracks.values());\n    const existingTracks = existingPublications.map(publication => publication.track);\n    const nonNullTracks = existingTracks.filter(track => track !== null)\n\n    this.state = {\n      tracks: nonNullTracks,\n      filter: 'None' \n    }\n\n    this.changeFilter = this.changeFilter.bind(this);\n  }\n\n  componentDidMount() {\n    if (!this.props.localParticipant) {\n      // when someone subscribes to one a new remote participants audio or video tracks (subscription by local participant happens automatically)\n      this.props.participant.on('trackSubscribed', track => this.addTrack(track));\n      // when a remote participant joins the room and publishes a new data track\n      this.props.participant.on('trackPublished', publication => this.addTrack(publication.track));\n    }\n  }\n\n  addTrack(track) {\n    this.setState({\n      tracks: [...this.state.tracks, track]\n    });\n  }\n\n  changeFilter(filter) {\n    const dataTrack = this.state.tracks.find(track => track.kind == \"data\");\n    dataTrack.send(filter);\n    this.setState({ filter: filter });\n  }\n\n  render() {\n    return ( \n      <div className=\"participant\" id={this.props.participant.identity}>\n        <div className=\"identity\">{ this.props.participant.identity}</div>\n        {\n          this.props.localParticipant\n          ? <FilterMenu changeFilter={this.changeFilter} />\n          : ''\n        }\n        \n        { \n          this.state.tracks.map(track => \n            <Track key={track} filter={this.state.filter} track={track}/>)\n        }\n      </div>\n    );\n  }\n}\n\nexport default Participant;\n","import React, {Component} from 'react';\nimport './App.scss';\nimport Participant from './Participant';\n\n\nclass Room extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      remoteParticipants: Array.from(this.props.room.participants.values())\n    }\n\n    this.leaveRoom = this.leaveRoom.bind(this);\n  }\n\n  componentDidMount() {\n    // Add event listeneres for future participants coming or going\n    this.props.room.on('participantConnected', participant => this.addParticipant(participant));\n    this.props.room.on('participantDisconnected', participant => this.removeParticipant(participant));\n    \n    window.addEventListener(\"beforeunload\", this.leaveRoom);\n  }\n\n  componentWillUnmount() {\n    this.leaveRoom();\n  }\n\n  leaveRoom() {\n    this.props.room.disconnect();\n    this.props.leaveRoom();\n  }\n\n  addParticipant(participant) {\n    console.log(`${participant.identity} has joined the room.`)\n    \n    this.setState({\n      remoteParticipants: [...this.state.remoteParticipants, participant]\n    })\n  }\n\n  removeParticipant(participant) {\n    console.log(`${participant.identity} has left the room`)\n\n    this.setState({\n      remoteParticipants: this.state.remoteParticipants.filter(p => p.identity != participant.identity)\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"room\">\n        <div className = \"participants\">\n          <Participant key={this.props.room.localParticipant.identity} localParticipant=\"true\" participant={this.props.room.localParticipant}/>\n          {\n            this.state.remoteParticipants.map(participant => \n              <Participant key={participant.identity} participant={participant}/>\n            )\n          }\n        </div>\n        <button id=\"leaveRoom\" onClick={this.leaveRoom}>Leave Room</button>\n      </div>\n    );\n  }\n\n}\n\nexport default Room;\n","import './App.scss';\nimport React, {Component} from 'react';\nimport Room from './Room';\nconst { connect, LocalDataTrack } = require('twilio-video');\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      identity: '',\n      room: null\n    }\n\n    this.inputRef = React.createRef();\n\n    this.joinRoom = this.joinRoom.bind(this);\n    this.leaveRoom = this.leaveRoom.bind(this);\n    this.updateIdentity = this.updateIdentity.bind(this);\n    this.removePlaceholderText = this.removePlaceholderText.bind(this);\n  }\n  \n  async joinRoom() {\n    try {\n      const response = await fetch(`https://backend-9288-dev.twil.io/token?identity=${this.state.identity}`);\n      const data = await response.json();\n      const room = await connect(data.accessToken, {\n        name:'secret-santa4',\n        audio: true,\n        video: true\n      });\n\n      const localDataTrack = new LocalDataTrack();\n      await room.localParticipant.publishTrack(localDataTrack);\n\n      this.setState({ room: room });\n    } catch(err) {\n      console.log(err);\n    }\n  }\n\n  leaveRoom() {\n    this.setState({ room: null });\n  }\n\n  updateIdentity(event) {\n    this.setState({\n      identity: event.target.value\n    });\n  }\n\n  removePlaceholderText() {\n    this.inputRef.current.placeholder = '';\n  }\n\n  render() {\n    const disabled = this.state.identity == '' ? true : false;\n\n    return (\n      <div className=\"app\">\n        { \n          this.state.room === null\n          ? <div className = \"lobby\">\n              <input \n                ref={this.inputRef} \n                value={this.state.identity} \n                onClick={this.removePlaceholderText} \n                onChange={this.updateIdentity} \n                placeholder=\"What's your name?\"/>\n              <button disabled={disabled} onClick={this.joinRoom}>Join Room</button>\n            </div>\n          : <Room leaveRoom={this.leaveRoom} room={this.state.room} />\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}