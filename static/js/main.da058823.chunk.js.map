{"version":3,"sources":["Track.js","FilterIcon.js","FilterMenu.js","Filter.js","Participant.js","Room.js","App.js","reportWebVitals.js","index.js"],"names":["Track","props","ref","React","createRef","this","track","current","appendChild","attach","className","Component","FilterIcon","name","onClick","changeFilter","src","alt","FilterMenu","map","filter","Filter","Array","fill","snowflake","light","Participant","state","tracks","addTrack","bind","existingTracks","from","participant","values","publication","setState","on","id","identity","length","owner","Room","participants","leaveRoom","existingParticipants","room","localParticipant","addParticipant","removeParticipant","window","addEventListener","disconnect","console","log","p","class","App","inputRef","joinRoom","updateIdentity","removePlaceholderText","connect","require","event","target","value","placeholder","fetch","response","json","data","accessToken","audio","video","disabled","onChange","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.da058823.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport './App.scss';\n\n\nclass Track extends Component {\n  constructor(props) {\n    super(props)\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    if (this.props.track != null) {\n      this.ref.current.appendChild(this.props.track.attach())\n    }\n  }\n  \n  render() {\n    return (\n      <div className=\"track\" ref={this.ref}></div> \n    )\n  }\n}\n\nexport default Track;\n","import './App.scss';\n\nfunction FilterIcon(props) {\n  return (\n    <div className={`icon icon-${props.name}`} onClick={ () => props.changeFilter(props.name) }>\n      <img src={`${props.name}.png`} alt={`icon for ${props.name} filter`}/>\n    </div>\n  );\n}\n\nexport default FilterIcon;\n","import './App.scss';\nimport FilterIcon from './FilterIcon'\n\nfunction FilterMenu(props) {\n  const filters = ['none', 'snowfall', 'green_red', 'twinkle'];\n  return (\n    <div className=\"filterMenu\">\n      { \n        filters.map(filter => <FilterIcon changeFilter={props.changeFilter} key={filter} name={filter}/>)\n      }\n    </div>\n  );\n}\n\nexport default FilterMenu;\n","import './App.scss';\n\n\nfunction Filter(props) {\n\n  return (\n    <div className={`filter ${props.name}`}>\n      { \n        props.name == 'snowfall'\n        ? Array(100).fill().map(snowflake => <div className=\"snowflake\"></div>)\n        : ''\n      }\n\n      { \n        props.name == 'twinkle'\n        ? Array(25).fill().map(light => <div className=\"light\"></div>)\n        : ''\n      }\n    </div>\n  );\n}\n\nexport default Filter;\n","import React, {Component} from 'react';\nimport './App.scss';\nimport Track from './Track';\nimport FilterMenu from './FilterMenu';\nimport Filter from './Filter';\n\n\nclass Participant extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      tracks: [],\n      filter: 'none'\n    }\n\n    this.addTrack = this.addTrack.bind(this);\n    this.changeFilter = this.changeFilter.bind(this);\n  }\n\n  componentDidMount() {\n    const existingPublications = Array.from(this.props.participant.tracks.values());\n    const existingTracks = existingPublications.map(publication => publication.track)\n    this.setState({tracks: existingTracks});\n\n    this.props.participant.on('trackSubscribed', track => this.addTrack(track));\n  }\n\n\n  addTrack(track) {\n    this.setState({\n      tracks: [...this.state.tracks, track]\n    })\n  }\n\n  changeFilter(filter) {\n    this.setState({ filter: filter })\n  }\n\n  render() {\n    return ( \n      <div className=\"participant\" id={this.props.participant.identity}>\n        <div className=\"identity\">{ this.props.participant.identity}</div>\n        { \n          this.state.tracks.length > 0 \n          ? this.state.tracks.map(track => <Track key={track} owner={this.props.participant.identity} track={track}/>)\n          : ''\n        }\n        <FilterMenu changeFilter={this.changeFilter} />\n        <Filter name={this.state.filter}/>\n      </div>\n    );\n  }\n}\n\nexport default Participant;\n","import React, {Component} from 'react';\nimport './App.scss';\nimport Participant from './Participant';\n\n\nclass Room extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      participants: []\n    }\n\n    this.leaveRoom = this.leaveRoom.bind(this);\n  }\n\n  componentDidMount() {\n    // Get existing participants and add everyone, including local participants, to participant state\n    const existingParticipants = Array.from(this.props.room.participants.values());\n    this.setState({participants: [...existingParticipants, this.props.room.localParticipant]});\n\n    // Add event listeneres for future participants coming or going\n    this.props.room.on('participantConnected', participant => this.addParticipant(participant));\n    this.props.room.on('participantDisconnected', participant => this.removeParticipant(participant));\n    window.addEventListener(\"beforeunload\", this.leaveRoom);\n  }\n\n  componentWillUnmount() {\n    this.leaveRoom();\n  }\n\n  leaveRoom() {\n    this.props.room.disconnect();\n    this.props.leaveRoom();\n  }\n\n  addParticipant(participant) {\n    console.log(`${participant.identity} has joined the room.`)\n\n    this.setState({\n      participants: [...this.state.participants, participant]\n    })\n  }\n\n  removeParticipant(participant) {\n    console.log(`${participant.identity} has left the room`)\n\n    this.setState({\n      participants: this.state.participants.filter(p => p.identity != participant.identity)\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"room\">\n        <div class = \"participants\">\n        {\n          this.state.participants.length > 0\n          ? this.state.participants.map(participant => \n              <Participant key={participant.identity} participant={participant}/>\n            )\n          : ''\n        }\n        </div>\n        <button id=\"leaveRoom\" onClick={this.leaveRoom}>Leave Room</button>\n      </div>\n    );\n  }\n\n}\n\nexport default Room;\n","import './App.scss';\nimport React, {Component} from 'react';\nimport Room from './Room';\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      identity: '',\n      room: null\n    }\n\n    this.inputRef = React.createRef();\n\n    this.joinRoom = this.joinRoom.bind(this);\n    this.leaveRoom = this.leaveRoom.bind(this);\n    this.updateIdentity = this.updateIdentity.bind(this);\n    this.removePlaceholderText = this.removePlaceholderText.bind(this);\n  }\n\n  componentDidMount() {\n    const { connect } = require('twilio-video');\n    this.setState({connect: connect});\n  }\n\n  updateIdentity(event) {\n    this.setState({\n      identity: event.target.value\n    });\n  }\n\n  removePlaceholderText() {\n    this.inputRef.current.placeholder = '';\n  }\n  \n  async joinRoom() {\n    try {\n      const response = await fetch(`https://backend-9288-dev.twil.io/token?identity=${this.state.identity}`);\n      const data = await response.json();\n      const room = await this.state.connect(data.accessToken, {\n        name:'secret-santa4',\n        audio: true,\n        video: true \n      });\n\n      this.setState({ room: room });\n    } catch(err) {\n      console.log(err);\n    }\n  }\n\n  leaveRoom() {\n    this.setState({ room: null });\n  }\n\n  render() {\n    const disabled = this.state.identity == '' ? true : false;\n\n    return (\n      <div className=\"app\">\n        { \n          this.state.room === null\n          ? <div className = \"inactive\">\n              <input \n                ref={this.inputRef} \n                value={this.state.identity} \n                onClick={this.removePlaceholderText} \n                onChange={this.updateIdentity} \n                placeholder=\"What's your name?\"/>\n              <button disabled={disabled} onClick={this.joinRoom}>Join Room</button>\n            </div>\n          : <Room leaveRoom={this.leaveRoom} room={this.state.room} />\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}